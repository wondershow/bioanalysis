<html>
  <head>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script type="text/javascript" src="js/biodataobj.js"></script>
	<script type="text/javascript" src="js/parseobject.js"></script>
	<script type="text/javascript" src="js/htmltablobj.js"></script>
    <script type="text/javascript" src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>
    <script type="text/javascript">
		var google_spreadsheet_url = "https://spreadsheets.google.com/feeds/list/1VIOL9tepP3CXmdkvdZt8kEws3mNV1ZQPSyqRj25zYCc/od6/public/basic?alt=json";
		var fullData;
		var dataCases;
		$.ajax({
				url:   google_spreadsheet_url,
				type:     "GET",
				dataType: "jsonp",
				success: function(data){
					//console.log("asdf")
					fullData = data;
					dataCases = parseGoglJSonObj(fullData);
					configuratePage();
				},
				error: function(XMLHttpRequest, textStatus, errorThrown) {
						//console.log(arguments);
						console.log("Status: " + textStatus);
						console.log("Error: " + errorThrown);
						//cleanSendObjArray(curObjIndex);
				},
		});
		
		function configuratePage() {
			addTable();
		}
		
		function addTable() {
			var tableData = [];
			var i=0;
			for(i=0;i<dataCases.length;i++) {
				tableData.push(dataCases[i].getAllValues());
			}
			
			var dataTable = new HTMLTable(tableData,dataCases[0].getAllPropNames(),"table_header_div","table_body_div");
			dataTable.addTable();
		}
		/*
		$.ajax(google_spreadsheet_url).done(function(result){
			console.log(result);
		}); 
		
		function createCORSRequest(method, url) {
			var xhr = new XMLHttpRequest();
			if ("withCredentials" in xhr) {
				// Check if the XMLHttpRequest object has a "withCredentials" property.
				// "withCredentials" only exists on XMLHTTPRequest2 objects.
				xhr.open(method, url, true);
			} else if (typeof XDomainRequest != "undefined") {
				// Otherwise, check if XDomainRequest.
				// XDomainRequest only exists in IE, and is IE's way of making CORS requests.
				xhr = new XDomainRequest();
				xhr.open(method, url);
			} else {
				// Otherwise, CORS is not supported by the browser.
				xhr = null;
			}
			return xhr;
		}

		var xhr = createCORSRequest('GET', google_spreadsheet_url);
		if (!xhr) {
		  console.log('CORS not supported');
		}
		
		xhr.onload = function() {
			var responseText = xhr.responseText;
			console.log("returned")
			console.log(responseText);
			// process the response.
		};

		xhr.onerror = function() {
		  console.log('There was an error!');
		};
		//xhr.send();
		console.log("wating....")*/
		$(document).ready(function()
		{
			$("#table_header_div").scroll(function () { 
				$("#table_body_div").scrollTop($("#table_header_div").scrollTop());
				$("#table_body_div").scrollLeft($("#table_header_div").scrollLeft());
			});
			$("#table_body_div").scroll(function () { 
				$("#table_header_div").scrollTop($("#table_body_div").scrollTop());
				$("#table_header_div").scrollLeft($("#table_body_div").scrollLeft());
			});

		});
    </script>
  </head>
  <body>
	<div id="table_header_div" style="overflow:auto;overflow-x: hidden;">
			
	</div>
	<div id="table_body_div" style="overflow:auto;height:40%;">
			
	</div>
    <!-- YOUR CONTENT -->
  </body>
</html>